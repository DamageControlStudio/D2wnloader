# UTOPIA-Downloader
**Python** **多线程下载** **分块下载** **断点续传**

由于手机尤其是 iPhone 根本没有下载工具，官方不允许这种东西上架。

因此考虑用 Python 写了这个下载器，当然，想在 iPhone 上跑脚本你需要先安装 Pythonista 或者类似的东西。

主要解决断点续传、多线程分块下载问题。

可能出现的 bug ：

* 如果网站并不返回 Content-Length 会引起错误，对于这种网站分块下载和断点续传也没什么意义；

* ~~如果第一次下载到一半不成功，第二次不能改 blocks_num 参数，否则就分块错乱了；~~ 已修正；

* 在 iPhone 7 上，下载超过2G的文件时，最后一步计算 sha256 会出现 Memory Error，但是那时已经“缝合”完毕，文件是完整的。当然也可以通过注释掉这个功能避免看见错误，不过这应该是 Pythonista 的问题；

TODO:

* 更改分块数量后目前需重新进行下载，但是未来可以考虑利用之前的缓存数据，已经有的下载数据从本地读取，没有的再下载；

* 某些线程错误后需要手动重新开始，未来可以自动重新开始，并且已经成功下载的线程完成后可以考虑去帮助其他线程完成一部分；

这个版本测速功能是外挂形式的，这样鲁棒性可能好一些。
